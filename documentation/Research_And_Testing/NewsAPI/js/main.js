let currentQuery = "Bitcoin"
let currentPage = 1
const fetchNews = async (page, query) => {
    console.log(`Fetching News for ${query}, Page Number${page}...`);
    const url = 'https://newsapi.org/v2/everything?' +
        'q=' + query + '&' +
        // 'from=2024-04-25&' +
        'pageSize=20&' +
        'language=en&' +
        'page=' + page + "&" +
        'sortBy=popularity&' +
        'apiKey=bbe5eaeb9b474f1580211288c43046e7';

    const req = new Request(url);

    let responsePromise = await fetch(req)
    let response = await responsePromise.json()
    // console.log(JSON.stringify(response))

    // let response = {"status":"ok","totalResults":758,"articles":[{"source":{"id":null,"name":"ReadWrite"},"author":"Radek Zielinski","title":"BlackRock’s Bitcoin ETF sees first day without inflows","description":"BlackRock’s iShares Bitcoin Trust (IBIT) has experienced its first day without any inflows since the introduction of Bitcoin (BTC) exchange-traded… Continue reading BlackRock’s Bitcoin ETF sees first day without inflows\nThe post BlackRock’s Bitcoin ETF sees f…","url":"https://readwrite.com/blackrocks-bitcoin-etf-sees-first-day-without-inflows/","urlToImage":"https://readwrite.com/wp-content/uploads/2024/04/eaa08a84-02bf-4e04-af55-67efc1e88950.webp","publishedAt":"2024-04-25T11:28:14Z","content":"BlackRock’s iShares Bitcoin Trust (IBIT) has experienced its first day without any inflows since the introduction of Bitcoin (BTC) exchange-traded funds (ETFs) in the United States in January, Farsid… [+1836 chars]"},{"source":{"id":null,"name":"ReadWrite"},"author":"Radek Zielinski","title":"Bitcoin wallets holding over $1,000 surge 20% in 2024","description":"According to a report released by Fidelity Digital Assets on Monday, the number of Bitcoin wallets holding $1,000 or more… Continue reading Bitcoin wallets holding over $1,000 surge 20% in 2024\nThe post Bitcoin wallets holding over $1,000 surge 20% in 2024 ap…","url":"https://readwrite.com/bitcoin-wallets-holding-over-1000-surge-20-in-2024/","urlToImage":"https://readwrite.com/wp-content/uploads/2024/04/edecbe45-9e83-4422-98b5-c3786c33a5d1.webp","publishedAt":"2024-04-25T11:15:48Z","content":"According to a report released by Fidelity Digital Assets on Monday, the number of Bitcoin wallets holding $1,000 or more has experienced a significant 20% increase since the beginning of 2024.\r\nThis… [+2556 chars]"},{"source":{"id":null,"name":"Xataka.com"},"author":"Enrique Pérez","title":"La minería Bitcoin se enfrenta a un terreno inexplorado después del halving. El fundador de Twitter tiene la solución","description":"Los mineros del Bitcoin tenían apuntada la fecha del halving en su calendario desde hace tiempo. Aunque han habido grandes avances tecnológicos en las máquinas de minería cripto, la reducción a la mitad de la recompensa ha puesto a muchos mineros en apuros. P…","url":"https://www.xataka.com/criptomonedas/mineria-bitcoin-se-enfrenta-a-terreno-inexplorado-despues-halving-fundador-twitter-tiene-solucion","urlToImage":"https://i.blogs.es/1b73fa/jack-dorsey-block/840_560.jpeg","publishedAt":"2024-04-25T16:30:52Z","content":"Los mineros del Bitcoin tenían apuntada la fecha del halving en su calendario desde hace tiempo. Aunque han habido grandes avances tecnológicos en las máquinas de minería cripto, la reducción a la mi… [+2980 chars]"},{"source":{"id":null,"name":"Android Police"},"author":"Ben Khalesi","title":"Ransomware: What it is, and how you can avoid losing all your data in an attack","description":"Ransomeware has become increasingly popular over the past decade, with over $1 billion in payments in 2023 alone.","url":"https://www.androidpolice.com/ransomware-guide/","urlToImage":"https://static1.anpoimages.com/wordpress/wp-content/uploads/2024/04/ransomware-feature-image.jpg","publishedAt":"2024-04-26T00:21:13Z","content":"Ransomware attacks affect everything, including healthcare facilities, pharmaceutical companies, tech firms, and hotels and casinos in Las Vegas. Ransomware has reached a record high, with payments e… [+6602 chars]"},{"source":{"id":null,"name":"Torrentfreak.com"},"author":"Ernesto Van der Sar","title":"Researchers Showcase Decentralized AI-Powered Torrent Search Engine","description":"Researchers from Delft University of Technology plan to amplify their BitTorrent client \"Tribler\" with decentralized AI-powered search. A new demo shows that generative AI models make it possible to search for content in novel ways, without restriction. The u…","url":"https://torrentfreak.com/researchers-showcase-decentralized-ai-powered-torrent-search-engine-240425/","urlToImage":"https://torrentfreak.com/images/feadecen.jpg","publishedAt":"2024-04-25T09:49:54Z","content":"Twenty-five years ago, peer-to-peer file-sharing took the Internet by storm. \r\nThe ability to search for and share content with complete strangers was nothing short of a revolution. \r\nIn the years th… [+5535 chars]"},{"source":{"id":null,"name":"Les Numériques"},"author":"Clic2Load","title":"Actualité : C'est quoi le Dark Web et comment s'en protéger ?","description":"Le Dark Web impressionne, fait peur, mais attire aussi les curieux, par son côté mystérieux et transgressif. Qu’est-il réellement ? Représente-t-il un danger ? Et comment s’en protéger ?","url":"https://www.lesnumeriques.com/antivirus/c-est-quoi-le-dark-web-et-comment-s-en-proteger-n221119.html","urlToImage":"https://cdn.lesnumeriques.com/optim/news/22/221119/03028c65-c-est-quoi-le-dark-web-et-comment-s-en-proteger__1200_678__0-85-1920-1093.jpg","publishedAt":"2024-04-26T09:30:00Z","content":"Le dark web, partie cachée du web profond non indexée par les moteurs de recherche standards, suscite à la fois crainte et curiosité. Accessible via des logiciels spéciaux, il représente environ 5% d… [+8324 chars]"},{"source":{"id":null,"name":"01net.com"},"author":"Gabriel Manceau","title":"Torrent : dopé à l’IA, ce moteur de recherche anonyme est impossible à stopper","description":"À l'heure où la centralisation d’Internet est de plus en plus contestée, une équipe de chercheurs de l’Université de Technologie de Delft présente une innovation qui pourrait changer la donne : un moteur de recherche Torrent alimenté par l’IA et entièrement d…","url":"https://www.01net.com/actualites/torrent-dope-ia-moteur-recherche-anonyme-impossible-stopper.html","urlToImage":"https://www.01net.com/app/uploads/2024/04/site-pirate-streaming-illegal.jpg","publishedAt":"2024-04-26T10:07:00Z","content":"À l’heure où la centralisation dInternet est de plus en plus contestée, une équipe de chercheurs de lUniversité de Technologie de Delft présente une innovation qui pourrait changer la donne : un mote… [+3077 chars]"},{"source":{"id":null,"name":"Quartz India"},"author":"Vinamrata Chaturvedi","title":"Bitcoin falls below $64,000 as Meta, Microsoft and Alphabet continue to drop","description":"Bitcoin fell below $64,000 Thursday morning as tech stocks continued to decline. The flagship cryptocurrency was trading around $63,240 in mid-morning, with a drop of over 2.5%.Read more...","url":"https://qz.com/bitcoin-ether-meta-ibm-microsoft-google-alphabet-1851435315","urlToImage":"https://i.kinja-img.com/image/upload/c_fill,h_675,pg_1,q_80,w_1200/bb0a246a712207e445065f65d8e5a909.jpg","publishedAt":"2024-04-25T15:41:00Z","content":"Bitcoin fell below $64,000 Thursday morning as tech stocks continued to decline. The flagship cryptocurrency was trading around $63,240 in mid-morning, with a drop of over 2.5%.\r\nThe price decline co… [+1444 chars]"},{"source":{"id":null,"name":"Quartz India"},"author":"Vinamrata Chaturvedi","title":"The Dow drops 300 points on low economic growth, high inflation, and weak tech earnings","description":"The Dow Jones Industrial Average and other major U.S. stock indexes had recovered from earlier steep losses toward the end of the day Thursday, but they remained deep in the red. Quarterly earnings reports from tech giants such as Facebook parent Meta and IBM…","url":"https://qz.com/dow-jones-stocks-gdp-inflation-tech-earnings-1851435533","urlToImage":"https://i.kinja-img.com/image/upload/c_fill,h_675,pg_1,q_80,w_1200/932ac14d587baed7536752ab29eb7ddf.jpg","publishedAt":"2024-04-25T19:35:00Z","content":"The Dow Jones Industrial Average and other major U.S. stock indexes had recovered from earlier steep losses toward the end of the day Thursday, but they remained deep in the red. Quarterly earnings r… [+5788 chars]"},{"source":{"id":"focus","name":"Focus"},"author":"Von FOCUS-online-Experte Roman Reher","title":"Krypto-Profi erklärt - Nach dem vierten Halving ist Bitcoin nun ein härteres Asset als Gold","description":"Nicht nur Krypto-Freunde waren heiß auf das vierte Bitcoin-Halving (in der Nacht auf 20. April) und dessen Auswirkungen. Krypto-Profi Roman Reher erklärt, warum diese Halbierung eine ganz besondere war und was seit dem Halving passiert ist.Von FOCUS-online-Ex…","url":"https://www.focus.de/experts/krypto-profi-erklaert-nach-dem-vierten-halving-ist-bitcoin-nun-ein-haerteres-asset-als-gold_id_259890925.html","urlToImage":"https://p6.focus.de/img/fotos/id_11978594/bitcoin.jpg?im=Crop%3D%280%2C236%2C2833%2C1416%29%3BResize%3D%281200%2C627%29&impolicy=perceptual&quality=mediumHigh&hash=7183b50c725309519819aa9a3099680fc03d4ecb97712dbc11c89897cbfda332","publishedAt":"2024-04-26T10:56:14Z","content":"<ul><li>\r\nKommentare</li><li>\r\nE-Mail</li><li>\r\nTeilen</li><li>\r\nMehr</li><li>\r\nTwitter</li><li>\r\nDrucken</li><li>\r\nFeedback</li><li>\r\nFehler meldenSie haben einen Fehler gefunden?\r\nBitte markieren S… [+6585 chars]"},{"source":{"id":null,"name":"Nakedcapitalism.com"},"author":"Lambert Strether","title":"2:00PM Water Cooler 4/25/2024","description":"By Lambert Strether of Corrente. * * * Bird Song of the Day American Woodcock, Powhatan State Park, Powhatan, Virginia, United States. “In flight then calling from ground.” Apparently the peents are from the ground! * * * * * * Contact information for plants:…","url":"https://www.nakedcapitalism.com/2024/04/200pm-water-cooler-4-25-2024.html","urlToImage":"https://www.nakedcapitalism.com/wp-content/uploads/2024/04/rcp.png","publishedAt":"2024-04-25T18:00:58Z","content":"By Lambert Strether of Corrente.\r\n* * *\r\nBird Song of the Day\r\nAmerican Woodcock, Powhatan State Park, Powhatan, Virginia, United States. “In flight then calling from ground.” Apparently the peents a… [+30914 chars]"},{"source":{"id":null,"name":"Forbes"},"author":"Javier Bastardo, Contributor, \n Javier Bastardo, Contributor\n https://www.forbes.com/sites/javierbastardo/","title":"Privacy-Centric Bitcoin Wallet Founders Held Under Laundering Charges","description":"The founders of Samourai Wallet were arrested under unregulated money transmision and laundering charges by the U.S. Attorney's Office og the Southern District of NY.","url":"https://www.forbes.com/sites/digital-assets/2024/04/25/privacy-centric-bitcoin-wallet-founders-held-under-laundering-charges/","urlToImage":"https://imageio.forbes.com/specials-images/imageserve/6629c9fc1533b2474619759f/0x0.jpg?format=jpg&height=900&width=1600&fit=bounds","publishedAt":"2024-04-25T13:30:00Z","content":"A close-up of a human eye on an IBM computer monitor, 1983. (Photo by Alfred Gescheidt/Getty ... [+] Images)\r\nGetty Images\r\nThe founders of the bitcoin wallet Samourai Wallet were arrested on April 2… [+3254 chars]"},{"source":{"id":null,"name":"Forbes"},"author":"Clem Chambers, Senior Contributor, \n Clem Chambers, Senior Contributor\n https://www.forbes.com/sites/investor/people/clem/","title":"After The Bitcoin Halving, What Might Be Next For The Price?","description":"With bitcoin's long-anticipated halving behind it, where does the price of the original cryptocurrency go from here?","url":"https://www.forbes.com/sites/digital-assets/2024/04/25/after-the-bitcoin-halving-what-might-be-next-for-the-price/","urlToImage":"https://imageio.forbes.com/specials-images/imageserve/65a005ada1af0f7dd7fce461/0x0.jpg?format=jpg&height=900&width=1600&fit=bounds","publishedAt":"2024-04-25T15:45:42Z","content":"Bitcoin's much anticipated halving has occurred. \r\ngetty\r\nIn all big asset rallies there is a classic hockey stick form created in that assets chart. It is simply an exponential progression. Price gr… [+3331 chars]"},{"source":{"id":null,"name":"Forbes"},"author":"Bill Hardekopf, Contributor, \n Bill Hardekopf, Contributor\n https://www.forbes.com/sites/billhardekopf/","title":"This Week In Credit Card News: The Cut In Late Fees May Increase Your Card’s Interest Rate","description":"What took place this week in the credit card and payment industries","url":"https://www.forbes.com/sites/billhardekopf/2024/04/25/this-week-in-credit-card-news-the-cut-in-late-fees-may-increase-your-cards-interest-rate/","urlToImage":"https://imageio.forbes.com/specials-images/imageserve/60cbc31d96b37d3c5988ace6/0x0.jpg?format=jpg&height=900&width=1600&fit=bounds","publishedAt":"2024-04-25T22:09:52Z","content":"Synchrony Hikes Interest Rates on Credit Cards to Offset Late Fee Rule\r\nThe credit card company Synchrony Financial is hiking interest rates it charges to its customers, part of a series of steps to … [+6295 chars]"},{"source":{"id":null,"name":"Forbes"},"author":"Lawrence Wintermeyer, Contributor, \n Lawrence Wintermeyer, Contributor\n https://www.forbes.com/sites/lawrencewintermeyer/","title":"As Institutional ETPs Push BTC Higher, The Crypto Ecosystem Needs A Revival","description":"While institutions have influenced crypto’s mainstream adoption, the crypto industry must build on its core values of inclusion, transparency, privacy and decentralization.","url":"https://www.forbes.com/sites/lawrencewintermeyer/2024/04/25/as-institutional-etps-push-btc-higher-the-crypto-ecosystem-needs-a-revival/","urlToImage":"https://imageio.forbes.com/specials-images/imageserve/66288ec63f681ff7d01b5309/0x0.jpg?format=jpg&height=900&width=1600&fit=bounds","publishedAt":"2024-04-25T12:00:00Z","content":"The word \"REVIVAL\" written in vintage metal letterpress type in a wooden drawer with dividers.\r\ngetty\r\nInstitutional spot bitcoin ETPs have become a strong catalyst for BTCs market dynamics in the pa… [+6370 chars]"},{"source":{"id":null,"name":"Forbes"},"author":"Nina Bambysheva, Forbes Staff, \n Nina Bambysheva, Forbes Staff\n https://www.forbes.com/sites/ninabambysheva/","title":"Anchorage Digital Bank Launches Global Settlement Network For Digital Assets","description":"The San Francisco crypto custodian wants to make it easy for institutional clients to transfer their funds without compromising security.","url":"https://www.forbes.com/sites/digital-assets/2024/04/25/anchorage-digital-bank-launches-global-settlement-network-for-digital-assets/","urlToImage":"https://imageio.forbes.com/specials-images/imageserve/6629d11f531c4452ca0b28ed/0x0.jpg?format=jpg&crop=2500,1875,x0,y4,safe&height=900&width=1600&fit=bounds","publishedAt":"2024-04-25T13:00:00Z","content":"Nathan McCauley, Anchorage Digital's cofounder and CEO\r\nAnchorage Digital\r\nSan Franciscos Anchorage Digital Bank, N.A., a federally chartered crypto bank, primarily focused on trust and custodial ser… [+3726 chars]"},{"source":{"id":null,"name":"Forbes"},"author":"Shehan Chandrasekera, Senior Contributor, \n Shehan Chandrasekera, Senior Contributor\n https://www.forbes.com/sites/shehanchandrasekera/","title":"The New IRS Crypto Form Brings Hidden Challenges For Taxpayers","description":"Form 1099-DA is meant to help the IRS identify tax dodgers. Its implementation next year could create complications.","url":"https://www.forbes.com/sites/digital-assets/2024/04/25/the-new-irs-crypto-form-brings-hidden-challenges-for-taxpayers/","urlToImage":"https://imageio.forbes.com/specials-images/imageserve/645f8c416c246564e8b0d7c7/0x0.jpg?format=jpg&crop=4096,2303,x0,y0,safe&height=900&width=1600&fit=bounds","publishedAt":"2024-04-25T18:26:00Z","content":"A new IRS form will help the collection agency better monitor taxpayers\r\ngetty\r\nOverview\r\nOn April 18, the Internal Revenue Service released the draft version of Form 1099-DADigital Asset Proceeds Fr… [+4404 chars]"},{"source":{"id":null,"name":"BBC News"},"author":"https://www.facebook.com/bbcnews","title":"Cómo la crisis ha disparado el uso de criptomonedas en Argentina (y por qué muchos las prefieren al dólar)","description":"Te contamos del \"combo explosivo\" de factores que ha hecho que millones de argentinos adopten los activos virtuales como moneda de transacción y ahorro, y del nuevo registro que busca regular a los proveedores de cripto.","url":"https://www.bbc.com/mundo/articles/cle0891n7ljo","urlToImage":"https://ichef.bbci.co.uk/news/1024/branded_mundo/0456/live/560cf6b0-00dc-11ef-9544-994874f0e0cc.jpg","publishedAt":"2024-04-26T11:30:58Z","content":"Fuente de la imagen, Getty Images\r\nPie de foto, En 2023, Argentina fue el décimo quinto país del mundo con mayor adopción de criptomonedas. \r\nArticle information<ul><li>Author, Veronica Smink</li><li… [+11926 chars]"},{"source":{"id":null,"name":"Biztoc.com"},"author":"coingape.com","title":"How Is Bitcoin Halving Adjusting The Market?","description":"It has been five days since the completion of Bitcoin halving and slicing the Bitcoin mining reward to 3.125. Before Bitcoin halved, the cryptocurrencies faced a severe correction zone where Bitcoin dropped to below $60K. The same happened with Ethereum, as i…","url":"https://biztoc.com/x/e40c0cd62bac72a3","urlToImage":"https://c.biztoc.com/p/e40c0cd62bac72a3/s.webp","publishedAt":"2024-04-25T13:22:56Z","content":"It has been five days since the completion of Bitcoin halving and slicing the Bitcoin mining reward to 3.125. Before Bitcoin halved, the cryptocurrencies faced a severe correction zone where Bitcoin … [+311 chars]"},{"source":{"id":null,"name":"Biztoc.com"},"author":"cryptonews.com","title":"Bitcoin Price Prediction: BTC Hits $64,165 Amid Market Fluctuations and ETF Inflows in Play","description":"Bitcoin Price Prediction Today, Bitcoin (BTC/USD) shows modest growth, trading at $64,165. This Bitcoin price prediction explores this slight uptick in detail, highlighting the cryptocurrency’s resilience in a fluctuating market. Key resistance lies at $67,68…","url":"https://biztoc.com/x/b8139b327db6b686","urlToImage":"https://c.biztoc.com/p/b8139b327db6b686/s.webp","publishedAt":"2024-04-25T05:34:06Z","content":"Bitcoin Price PredictionToday, Bitcoin (BTC/USD) shows modest growth, trading at $64,165. This Bitcoin price prediction explores this slight uptick in detail, highlighting the cryptocurrencys resilie… [+291 chars]"}]}
    console.log(response)
    let str = ""
    document.querySelector("#resultCount").innerHTML = response.totalResults
    for (let item of response.articles){
        str = str + `<div class="card my-4 mx-2" style="width: 18rem;">
                <img src="${item.urlToImage}" class="card-img-top" alt="...">
                <div class="card-body">
                    <h5 class="card-title">${item.title}</h5>
                    <p class="card-text">${item.description}</p>
                    <a href="${item.url}" target="_blank" class="btn btn-primary">Read Article</a>
                </div>
            </div>`
    }
    document.querySelector(".content").innerHTML = str
}

fetchNews(1, currentQuery)
document.querySelector("#search").addEventListener("click",(e) =>{
    e.preventDefault()
    let query = document.querySelector("#searchInput").value;
    currentQuery = query
    fetchNews(1, query)
})

document.querySelector("#previousPage").addEventListener("click",(e) =>{
    e.preventDefault()
    if (currentPage>1){
        currentPage = currentPage - 1
        fetchNews(currentPage, currentPage)
    }

})

document.querySelector("#nextPage").addEventListener("click",(e) =>{
    e.preventDefault()
    currentPage = currentPage + 1
    fetchNews(currentPage, currentQuery)
})


